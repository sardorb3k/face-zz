# ============================================
# Face Recognition Attendance System
# Environment Configuration
# ============================================
# 
# Copy this file to .env and update with your values
# Backend: cp env.example backend/.env
# Frontend: cp env.example frontend/.env.local
# ============================================

# ============================================
# Backend Configuration
# ============================================

# API Settings
API_HOST=0.0.0.0
API_PORT=8000
API_URL=http://localhost:8000

# Auto-start video worker on backend startup
AUTO_START_VIDEO_WORKER=true

# ============================================
# Database & Directories
# ============================================

# Base directories (relative to backend directory)
DATA_DIR=./data
MODEL_DIR=./models
DB_DIR=./data

# Detected faces directory
DETECTED_FACES_DIR=./data/detected_faces

# ============================================
# Face Recognition Settings
# ============================================

# InsightFace model name (buffalo_l, buffalo_s, etc.)
MODEL_NAME=buffalo_l

# Face recognition threshold (cosine similarity, 0.0-1.0)
# Lower = more lenient, Higher = more strict
FACE_RECOGNITION_THRESHOLD=0.4

# Face detection threshold (0.0-1.0)
FACE_DETECTION_THRESHOLD=0.5

# GPU acceleration (true/false)
USE_GPU=false

# ============================================
# Camera Configuration
# ============================================

# RTSP Cameras - DEPRECATED: Video worker now uses ONLY cameras from database
# Configure cameras via admin panel: Admin → RTSP Config
# This variable is no longer used - cameras are stored in database
# RTSP_CAMERAS=

# Laptop Camera (optional, disabled by default)
# Set to true to enable laptop camera
USE_LAPTOP_CAMERA=false

# Laptop camera index (usually 0, 1, 2, etc.)
# Only used if USE_LAPTOP_CAMERA=true
LAPTOP_CAMERA_INDEX=0

# ============================================
# Video Worker Settings
# ============================================

# Process every Nth frame (1 = all frames, 2 = every other frame, etc.)
# Higher = better performance, lower = more accurate
FRAME_SKIP=2

# Duplicate prevention window (seconds)
# Prevents logging same student multiple times within this window
DUPLICATE_PREVENTION_WINDOW_SECONDS=60

# DeepSORT tracking (true/false)
# Advanced tracking for better duplicate prevention
DEEPSORT_ENABLED=false

# Camera reconnection settings
RECONNECT_DELAY=5
MAX_RECONNECT_ATTEMPTS=10

# ============================================
# CORS Settings
# ============================================

# Allowed CORS origins (comma-separated)
# For production, specify exact domains
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# ============================================
# Frontend Configuration
# ============================================

# Next.js public environment variables
# These are exposed to the browser
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_WS_URL=ws://localhost:8000

# ============================================
# Production Settings (Optional)
# ============================================

# For production deployment, uncomment and set:
# API_URL=https://your-domain.com
# CORS_ORIGINS=https://your-frontend-domain.com
# USE_GPU=true  # If you have GPU support
# DEEPSORT_ENABLED=true  # For better tracking
# NEXT_PUBLIC_API_URL=https://your-backend-domain.com
# NEXT_PUBLIC_WS_URL=wss://your-backend-domain.com

# ============================================
# Notes
# ============================================

# 1. Video worker uses ONLY active RTSP cameras from database
#    Configure cameras via admin panel: Admin → RTSP Config
#
# 2. Laptop camera is optional and disabled by default
#    Set USE_LAPTOP_CAMERA=true to enable
#
# 3. For GPU acceleration, ensure:
#    - NVIDIA GPU with CUDA installed
#    - onnxruntime-gpu package installed
#    - USE_GPU=true
#
# 4. DeepSORT requires additional dependencies:
#    - Install: pip install deepsort-realtime
#    - Set: DEEPSORT_ENABLED=true
#
# 5. Frontend environment variables must start with NEXT_PUBLIC_
#    to be accessible in the browser

